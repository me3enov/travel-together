(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[385],{1876:function(e,t,a){Promise.resolve().then(a.bind(a,9920))},5643:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var n=a(7437);a(2265);var s=a(5880),l=a(3145),r=a(8575),o=a(4492),i=e=>{let{name:t,imagePath:a,index:i}=e,c=(0,r.I0)(),d=(0,r.v9)(e=>e.token.cards.find(e=>e.name===t)),u=(0,r.v9)(e=>e.token.availableTokens),m=(null==d?void 0:d.token)===1?"/travel-together/icons/token1.svg":(null==d?void 0:d.token)===2?"/travel-together/icons/token2.svg":null,x=u.first>0||u.second>0;return(0,n.jsxs)(s.E.div,{className:"flex flex-col items-center space-y-5 cursor-pointer",initial:{opacity:0,scale:1.4},animate:{opacity:1,scale:1},transition:{duration:.4,ease:"easeOut",delay:.1*i},whileHover:!x||(null==d?void 0:d.token)?{}:{scale:1.1},onClick:x||(null==d?void 0:d.token)?()=>{(null==d?void 0:d.token)?c((0,o.gy)(t)):c((0,o.OY)(t))}:void 0,children:[(0,n.jsx)("div",{className:"relative w-[212px] h-[324px] rounded-[30px] border-[15px] border-[var(--token-background-color)]",children:(0,n.jsxs)(s.E.div,{className:"relative w-full h-full rounded-[30px] bg-[var(--card-bg-color)]",style:{filter:(null==d?void 0:d.token)?"none":"grayscale(100%)"},whileHover:!x||(null==d?void 0:d.token)?{}:{filter:"grayscale(0%)"},transition:{duration:.3},children:[a?(0,n.jsx)(l.default,{src:"/travel-together/".concat(a,"@2x.png"),alt:t,width:212,height:324,className:"w-full h-full object-cover rounded-[15px]"}):(0,n.jsx)("div",{className:"w-full h-full bg-[var(--white-color)] rounded-[15px]"}),m&&(0,n.jsx)(l.default,{src:m,alt:"Token ".concat(null==d?void 0:d.token),width:50,height:50,className:"absolute top-[-35px] left-1/2 transform -translate-x-1/2 w-[50px] h-[50px]"})]})}),(0,n.jsx)("p",{className:"text-center text-[var(--white-color)] text-lg",children:t})]})};let c={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}};var d=e=>{let{cards:t}=e;return(0,n.jsx)(s.E.div,{className:"w-full flex flex-col items-center space-y-12",variants:c,initial:"hidden",animate:"visible",children:(0,n.jsx)("div",{className:"flex flex-wrap justify-center gap-10",children:t.map((e,t)=>(0,n.jsx)(i,{name:e.name,imagePath:e.imagePath,index:t},e.name))})})}},9920:function(e,t,a){"use strict";var n=a(7437),s=a(2265),l=a(9376),r=a(8575),o=a(4492),i=a(4131),c=a(9885),d=a(1131),u=a(5643),m=a(6160),x=a(6089),h=a(7727),f=a(5880);t.default=()=>{let e=(0,l.useRouter)(),t=(0,l.useParams)(),a=(0,r.I0)(),p=Array.isArray(t.round)?t.round[0]:t.round,v=(0,r.v9)(e=>e.token.availableTokens),g=(0,r.v9)(e=>e.token.cards),[k,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{var e;let t=i.Z.get("playerName");t&&y(t);let n=((null===(e=(0,h.Pt)("tempCards"))||void 0===e?void 0:e.filter(e=>e.tokenPlaced))||[]).map(e=>({name:e.name,imagePath:e.imagePath,category:e.category}));n.length>0&&a((0,o.w_)(n)),a((0,o.IH)({round:parseInt(p),isRescue:!0}))},[a,p]);let b=0===v.first&&0===v.second;return(0,n.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,n.jsx)(c.Z,{showHomeButton:!0}),(0,n.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center bg-gradient-to-b from-[#C2E59C] to-[#64B3F4] space-y-8 pt-16 pb-16",children:[(0,n.jsx)(m.Z,{roundTitle:"Round ".concat(p," - Last chance to save them"),subtitle:v.first+v.second===0?"Great!":"".concat(k,", please select the ").concat(v.first+v.second," most preferred options")}),(0,n.jsx)(u.Z,{cards:g}),(0,n.jsx)(f.E.div,{initial:{opacity:0,y:20},animate:b?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.5},className:"w-full px-8",children:(0,n.jsx)("div",{className:"w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl mx-auto ".concat(b?"":"invisible"),children:(0,n.jsx)(x.Z,{label:"Next",onClick:()=>{let t=[...(0,h.Pt)("tempCards")||[],...g.map(e=>({name:e.name,imagePath:e.imagePath,category:e.category,tokenPlaced:null!==e.token,score:1===e.token?3:2===e.token?2:0}))].reduce((e,t)=>{let a=e.findIndex(e=>e.name===t.name);return a>-1?(t.tokenPlaced||!e[a].tokenPlaced)&&(e[a]=t):e.push(t),e},[]);if((0,h.m8)("tempCards",t),4===parseInt(p)){i.Z.set("gameState","completed");let e=(0,h.Pt)("tempCards")||[],t=(0,h.Pt)("permanentCards");(0,h.m8)("permanentCards",[...t,...e]),window.history.replaceState(null,"","/result")}else{let t=parseInt(p)+1;i.Z.set("currentRound",t.toString()),i.Z.set("currentSelection","1"),i.Z.set("isRescue","false"),window.history.replaceState(null,"","/round/".concat(t,"/1")),e.push("/round/".concat(t,"/1"))}},disabled:!b})})})]}),(0,n.jsx)(d.Z,{})]})}},6160:function(e,t,a){"use strict";var n=a(7437),s=a(5880);t.Z=e=>{let{roundTitle:t,subtitle:a}=e;return(0,n.jsxs)(s.E.div,{className:"flex flex-col items-center space-y-2",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.2,ease:"easeOut"},children:[(0,n.jsx)(s.E.h2,{className:"text-3xl font-semibold",initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.5},children:t}),(0,n.jsx)(s.E.p,{className:"text-lg text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:a})]})}},1131:function(e,t,a){"use strict";var n=a(7437);t.Z=()=>(0,n.jsx)("footer",{className:"w-full h-16 py-4 bottom-0",children:(0,n.jsx)("p",{className:"text-center text-sm text-white",children:"by Artem 2024"})})},9885:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var n=a(7437),s=a(8575),l=a(2265),r=a(9106),o=()=>{let[e,t]=(0,l.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{t(!0)},className:"w-[40px] h-[32px] cursor-pointer transition-colors duration-300 hover:bg-transparent",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"32",fill:"none",className:"transition-colors duration-300",children:(0,n.jsx)("path",{d:"M34.29 18.32v11.9c0 .43-.156.802-.47 1.116a1.526 1.526 0 0 1-1.117.471h-9.527v-9.52h-6.352v9.52H7.297c-.43 0-.802-.157-1.116-.47a1.524 1.524 0 0 1-.472-1.116v-11.9L20 6.421l14.266 11.751Z",className:"hover:fill-white",fill:"currentColor"})})}),e&&(0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40",children:(0,n.jsx)(r.Z,{onClose:()=>{t(!1)}})})]})},i=a(3145),c=e=>{let{value:t,count:a}=e;return(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(i.default,{src:1===t?"/travel-together/icons/token1.svg":"/travel-together/icons/token2.svg",alt:"Token ".concat(t),width:32,height:32}),(0,n.jsxs)("span",{className:"text-white text-lg font-bold",children:["X ",a]})]})},d=e=>{let{showHomeButton:t}=e,a=(0,s.v9)(e=>e.token.availableTokens);return(0,n.jsxs)("header",{className:"w-full h-16 flex justify-between items-center p-4 bg-transparent fixed top-0 left-0 z-50",children:[t&&(0,n.jsx)(o,{}),t&&(0,n.jsxs)("div",{className:"flex space-x-8",children:[(0,n.jsx)(c,{value:1,count:a.first}),(0,n.jsx)(c,{value:2,count:a.second})]})]})}},9106:function(e,t,a){"use strict";var n=a(7437),s=a(9376),l=a(4131),r=a(6089),o=a(3333);t.Z=e=>{let{onClose:t}=e,a=(0,s.useRouter)();return(0,n.jsx)("div",{className:"flex flex-col space-y-4 mt-0",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-[30px] p-[20px] max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg w-full space-y-5",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)(o.Z,{onClose:t}),(0,n.jsx)("h2",{className:"text-lg font-semibold text-center text-[var(--header-text-color)] uppercase h-10",children:"Are you sure you want to reset?"}),(0,n.jsxs)("div",{className:"flex justify-around space-x-4 mt-4",children:[(0,n.jsx)(r.Z,{label:"Yes",onClick:()=>{l.Z.remove("gameState"),l.Z.remove("currentRound"),l.Z.remove("currentSelection"),l.Z.remove("isRescue"),localStorage.clear(),a.push("/")}}),(0,n.jsx)(r.Z,{label:"No",onClick:t})]})]})})}},6089:function(e,t,a){"use strict";var n=a(7437);t.Z=e=>{let{label:t,onClick:a,disabled:s=!1}=e;return(0,n.jsx)("button",{className:"w-full h-10 rounded-full uppercase transition-all duration-300 ease-in-out \n                    ".concat(s?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[var(--primary-color)] text-white hover:bg-gradient-to-r hover:from-[var(--primary-color)] hover:to-[var(--hover-primary-color)] hover:bg-size-200 hover:bg-pos-0 hover:bg-right-200"),onClick:a,disabled:s,children:t})}},3333:function(e,t,a){"use strict";var n=a(7437);t.Z=e=>{let{onClose:t}=e;return(0,n.jsx)("button",{className:"absolute top-[-10px] right-[-10px] w-[15px] h-[15px] cursor-pointer transition-colors duration-300 hover:bg-transparent",onClick:t,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",fill:"none",className:"transition-colors duration-300",children:(0,n.jsx)("path",{d:"M15 1.364 13.636 0 7.5 6.136 1.364 0 0 1.364 6.136 7.5 0 13.636 1.364 15 7.5 8.864 13.636 15 15 13.636 8.864 7.5 15 1.364Z",className:"hover:fill-white",fill:"currentColor"})})})}},4492:function(e,t,a){"use strict";a.d(t,{EC:function(){return s},IH:function(){return i},OY:function(){return r},gy:function(){return o},w_:function(){return l}});let n=(0,a(1455).oM)({name:"token",initialState:{availableTokens:{first:1,second:1},cards:[]},reducers:{initializeCards:(e,t)=>{e.cards=t.payload.map(e=>({...e,token:null}))},initializeRescueCards:(e,t)=>{e.cards=t.payload.map(e=>({...e,token:null}))},placeToken:(e,t)=>{let a=e.cards.find(e=>e.name===t.payload);a&&(e.availableTokens.first>0?(a.token=1,e.availableTokens.first-=1):e.availableTokens.second>0&&(a.token=2,e.availableTokens.second-=1))},removeToken:(e,t)=>{let a=e.cards.find(e=>e.name===t.payload);a&&null!==a.token&&(1===a.token?e.availableTokens.first+=1:2===a.token&&(e.availableTokens.second+=1),a.token=null)},setTokensByRoundType:(e,t)=>{t.payload.isRescue?2===t.payload.round?(e.availableTokens.first=2,e.availableTokens.second=2):3===t.payload.round?(e.availableTokens.first=1,e.availableTokens.second=1):4===t.payload.round&&(e.availableTokens.first=1,e.availableTokens.second=0):(e.availableTokens.first=1,e.availableTokens.second=1)}}}),{initializeCards:s,initializeRescueCards:l,placeToken:r,removeToken:o,setTokensByRoundType:i}=n.actions;t.ZP=n.reducer},7727:function(e,t,a){"use strict";a.d(t,{P7:function(){return l},Pt:function(){return s},j7:function(){return o},m8:function(){return n},mV:function(){return r}});let n=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))};function s(e){{let t=localStorage.getItem(e);return t?JSON.parse(t):null}}let l=()=>{let e=s("tempCards")||[],t=s("permanentCards")||[];e.forEach(e=>{let a=t.find(t=>t.name===e.name);if(a)a.score=(a.score||0)+(e.score||0);else{let{...a}=e;t.push(a)}}),n("permanentCards",t),n("tempCards",[])},r=e=>{let t=[];for(let a=0;a<e.length;a+=4)t.push({category:"all-".concat(Math.ceil((a+1)/4)),options:e.slice(a,a+4)});n("shuffledRounds",t)},o=()=>s("shuffledRounds")}},function(e){e.O(0,[889,455,145,880,971,117,744],function(){return e(e.s=1876)}),_N_E=e.O()}]);